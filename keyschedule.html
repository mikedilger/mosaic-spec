<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Key Schedule Record - Mosaic</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Key Schedule Record";
        var mkdocs_page_input_path = "keyschedule.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".">
          <img src="img/favicon-96x96.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="status.html">Status and Development</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Identity</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="identity.html">Identity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Location Service</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="bootstrap.html">Bootstrap</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="url.html">URL</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Data Formats</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="timestamps.html">Timestamps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="tags.html">Tags</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="record.html">Record Format</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="human_readable_content.html">Human Readable Content</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="reference.html">References</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Client-Server Protocol</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="network.html">Network architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="messages.html">Protocol messages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="filter.html">Filter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="sync.html">Sync</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Transport</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="transports.html">Transports</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="quic.html">QUIC</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="tcp.html">TCP with TLS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="websockets.html">WebSockets</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Accessory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="human_encodings.html">Human Encodings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="encrypted_secret_key.html">Encrypted Secret Key</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Registries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="applications.html">Application Registry</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="kinds.html">Record Kind Registry</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="tag_types.html">Tag Type Registry</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Application: Core</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Key Schedule Record</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#kind">Kind</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tags">Tags</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#payload">Payload</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#server-used">Server Used</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="profile.html">Profile Record</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="core_tags.html">Core Tags</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="friends.html">Acquaintences and Friends</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="reporting.html">Reporting</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Application: Mosaic Social Media</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="microblog.html">Microblogging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="blog.html">Blog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="reply_comment.html">Reply Comment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendices</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="cryptography.html">Cryptography</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="rationale.html">Rationale</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Mosaic</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Application: Core</li>
      <li class="breadcrumb-item active">Key Schedule Record</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="key-schedule-kind">Key Schedule (kind)</h1>
<p><status>PAGE STATUS: early draft</status></p>
<p>A Key Schedule record lists subkey information and revocation information for a
master key.</p>
<p>A Key Schedule record MUST be considered invalid if it does not conform to this
specification.</p>
<p>A Key Schedule record MUST be considered invalid if the signing key and the
master key are not identical.</p>
<h2 id="kind">Kind</h2>
<p><strong>Applicaton</strong>: Mosaic Core</p>
<p><strong>App Kind</strong>: 1 (Key Schedule)</p>
<p><strong>Flags</strong>: <em>Replaceable</em>, <em>Everybody</em>, <em>NotPrintable</em></p>
<p>Representation = <code>[0, 0, 0, 0, 0, 0, 1, 14]</code></p>
<h2 id="tags">Tags</h2>
<p>Every subkey listed in a key schedule record MUST have an associated
<a href="core_tags.html#subkey">subkey tag</a> listing the subkey.</p>
<h2 id="payload">Payload</h2>
<p>The payload is not <a href="human_readable_content.html">human readable</a>.</p>
<p>The payload contains a sequence of 40-byte subkey records laid out as follows:</p>
<pre><code>            1   2   3   4   4   5   6
    0   8   6   4   2   0   8   6   4
 0  +-------------------------------+
    | SUBKEY    1/4                 |
 8  +-------------------------------+
    | SUBKEY    2/4                 |
 16 +-------------------------------+
    | SUBKEY    3/4                 |
 24 +-------------------------------+
    | SUBKEY    4/4                 |
 32 +-------------------------------+
    |MARKER |   RESERVED            |
 40 +-------------------------------+
    |        REVOC TIMESTAMP        |
    +-------------------------------+
</code></pre>
<p><code>[0:32]</code> - SUBKEY is the 32-byte subkey</p>
<p><code>[32:34]</code> - MARKER is 2-bytes and is one of the following</p>
<ul>
<li>0x0 - ACTIVE_SIGNING_KEY - A Mosaic ed25519 signing key (subkey) in current use</li>
<li>0x1 - ACTIVE_ENCRYPTION_KEY - A Mosaic X25519 encryption key in current use<ul>
<li>These keys are used for receiving encrypted data only, not for signing.</li>
<li>Generally the secretkey for encryption is distributed to every device
  that needs the ability to view encrypted data. Being a separate subkey
  from the signing keys, it limits the damage from compromise.</li>
</ul>
</li>
<li>0x40 - REVOKED_ALL - All records signed by the key are to be considered
  invalid.</li>
<li>0x41 - REVOKED_PAST - Records signed by the key that were received prior to
  the revocation timestamp (based on when it was received by software and NOT
  based on the date inside of the record) are still considered valid; however,
  records either received after the revocation timestamp, or with a timestamp
  after the revocation timestamp, are considered invalid.</li>
<li>0x4F - OUT_OF_USE - Key is no longer in use (but nothing is revoked). This
  MAY be used for signing keys or encryption keys.</li>
<li>0x80 - ACTIVE_NOSTR_KEY - A nostr secp256k1 subkey<ul>
<li>This helps support dual-stack software that works with both nostr and
  Mosaic.</li>
</ul>
</li>
</ul>
<p><code>[34:40]</code> - Bytes 34:40 are reserved and MUST be 0.</p>
<p><code>[40:48]</code> - REVOC TIMESTAMP is 8-bytes and is in the format described in
<a href="timestamps.html">timestamps</a>. Timestamp is required for REVOKED ALL and
REVOKED PAST.  Timestamp is suggested for OUT_OF_USE. Timestamp SHOULD be
zeroed in all other cases.</p>
<h2 id="server-used">Server Used</h2>
<p>These are posted to all of the author's Outbox servers.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="tag_types.html" class="btn btn-neutral float-left" title="Tag Type Registry"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="profile.html" class="btn btn-neutral float-right" title="Profile Record">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div>
    <i>Mike Dilger edition, version 0.1.0</i>
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="tag_types.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="profile.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
