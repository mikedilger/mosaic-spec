<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Core Tags - Mosaic</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Core Tags";
        var mkdocs_page_input_path = "core_tags.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../img/favicon-96x96.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Mosaic Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../status/">Status and Development</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Mosaic Core</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" >Identity</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../cryptography/">Cryptography</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../identity/">Identity</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../bootstrap/">Bootstrap</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Record Type</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../timestamps/">Timestamps</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../record/">Record Format</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Core Tags</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reference/">References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Core Records</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../keyschedule/">Key Schedule Record</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../profile/">Profile Record</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Protocol</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../filter/">Filter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../protocol/">Core Protocol</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Registries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../tag_types/">Tag Type Registry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../kinds/">Record Kind Registry</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mosaic Accessory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../human_encodings/">Human Encodings</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mosaic Transport</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../websockets/">WebSockets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../webtransport/">WebTransport</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Extensions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../sync_protocol_extension/">Sync Protocol Extension</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Applications</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Mosaic Social media</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../microblog/">Microblogging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../blog/">Blog</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reply_comment/">Reply Comment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../chat/">Chat</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Mosaic</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Mosaic Core</li>
          <li class="breadcrumb-item">Record Type</li>
      <li class="breadcrumb-item active">Core Tags</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="mosaic-core-tags">Mosaic Core Tags</h1>
<p><status>PAGE STATUS: early draft</status></p>
<p>Tags are laid out as follows:</p>
<pre><code class="language-text">0           2      3         256 max
+-----------+------+----------+
| type      | len  | value ...|
+-----------+------+----------+
</code></pre>
<ul>
<li><code>[0:2]</code> - The type</li>
<li><code>[2:3]</code> - The length of the entire tag including the 3 byte header
    This must be at least 3.</li>
<li><code>[3:]</code> - The value, which is at most 253 bytes long.</li>
</ul>
<p>Rationale</p>
<ul>
<li>While for some tag types a length could be inferred, this is not
  true in general. Applications are not required to recognize every
  tag type to look up its known length or method of length
  calculation.</li>
</ul>
<p>Some tag types start with padding in the value in order to better align
their data.</p>
<h2 id="notify-public-key">Notify Public Key</h2>
<blockquote>
<p><strong>0x1</strong></p>
</blockquote>
<pre><code class="language-text">
      0       2    3                  8
 0x0  +-------------------------------+ 0
      |  0x1  |0x28|       0x0        |
 0x8  +-------------------------------+ 8
      | PUBLIC KEY 1/4                |
 0x10 +-------------------------------+ 16
      | PUBLIC KEY 2/4                |
 0x18 +-------------------------------+ 24
      | PUBLIC KEY 3/4                |
 0x20 +-------------------------------+ 32
      | PUBLIC KEY 4/4                |
 0x28 +-------------------------------+ 40
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x1 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x28</li>
<li><code>[3:8]</code> - Zeroed</li>
<li><code>[8:40]</code> - public key (32 bytes)</li>
</ul>
<p>Records with this tag indicate that the record is if interest to the
person identified by that public key (as their master key).  Being tagged
as such, it should be delivered to all of this persons' INBOX servers as
specified in their <a href="../bootstrap/">bootstrap</a> record.</p>
<h2 id="reply-by-hash">Reply by Hash</h2>
<blockquote>
<p><strong>0x2</strong></p>
</blockquote>
<pre><code class="language-text">      0       2   3   4               8
 0x0  +-------------------------------+ 0
      |  0x2  |0x28| 0|     KIND      |
 0x8  +-------------------------------+ 8
      | HASH 1/4                      |
 0x10 +-------------------------------+ 16
      | HASH 2/4                      |
 0x18 +-------------------------------+ 24
      | HASH 3/4                      |
 0x20 +-------------------------------+ 32
      | HASH 4/4                      |
 0x28 +-------------------------------+ 40
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x2 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x28</li>
<li><code>[3:4]</code> - Zeroed</li>
<li><code>[4:8]</code> - The <a href="../kinds/">kind</a></li>
<li><code>[8:40]</code> - The hash (32 bytes)</li>
</ul>
<p>This is a reply to another record in a threading sense.</p>
<p><code>KIND</code> is a 4-byte record <a href="../kinds/">kind</a> indicating the kind of record
that this one replies to. Replies are application-independent and may
reference records of any type. This information is provided to prevent
lookup of records of kinds that software is not able to or does not wish
to handle.</p>
<p><code>HASH</code> is a 32-byte hash <a href="../reference/">reference</a> to some other record
indicating which other record this record replies to.</p>
<p>If a record includes this tag, it must also include a
<a href="#root-by-addr">Root by Addr</a> tag as well.</p>
<h2 id="reply-by-addr">Reply by Addr</h2>
<blockquote>
<p><strong>0x3</strong></p>
</blockquote>
<pre><code class="language-text">      0       2   3   4               8
 0x0  +-------------------------------+ 0
      |  0x3  |0x38| 0|     KIND      |
 0x8  +-------------------------------+ 8
      | ADDR 1/4                      |
 0x10 +-------------------------------+ 16
      | ADDR 2/4                      |
 0x18 +-------------------------------+ 24
      | ADDR 3/4                      |
 0x20 +-------------------------------+ 32
      | ADDR 4/4                      |
 0x28 +-------------------------------+ 40
      | ADDR 5/4                      |
 0x30 +-------------------------------+ 48
      | ADDR 6/4                      |
 0x38 +-------------------------------+ 56
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x3 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x38</li>
<li><code>[3:4]</code> - Zeroed</li>
<li><code>[4:8]</code> - The <a href="../kinds/">kind</a></li>
<li><code>[8:56]</code> - The address (48 bytes)</li>
</ul>
<p>This is a reply to another record in a threading sense.</p>
<p><code>KIND</code> is a 4-byte record <a href="../kinds/">kind</a> indicating the kind of record
that this one replies to. Replies are application-independent and may
reference records of any type. This information is provided to prevent
lookup of records of kinds that software is not able to or does not wish
to handle.</p>
<p><code>ADDR</code> is a 48-byte address <a href="../reference/">reference</a> to some other
record indicating which other record this record replies to.</p>
<p>If a record includes this tag, it must also include a
<a href="#root-by-addr">Root by Addr</a> tag as well.</p>
<h2 id="root-by-hash">Root by Hash</h2>
<blockquote>
<p><strong>0x4</strong></p>
</blockquote>
<pre><code class="language-text">      0       2   3   4               8
 0x0  +-------------------------------+ 0
      |  0x4  |0x28| 0|     KIND      |
 0x8  +-------------------------------+ 8
      | HASH 1/4                      |
 0x10 +-------------------------------+ 16
      | HASH 2/4                      |
 0x18 +-------------------------------+ 24
      | HASH 3/4                      |
 0x20 +-------------------------------+ 32
      | HASH 4/4                      |
 0x28 +-------------------------------+ 40
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x4 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x28</li>
<li><code>[3:4]</code> - Zeroed</li>
<li><code>[4:8]</code> - The <a href="../kinds/">kind</a></li>
<li><code>[8:40]</code> - The hash (32 bytes)</li>
</ul>
<p>This indicates the root of the reply thread. This is to support loading
an entire thread in one round trip.</p>
<p><code>KIND</code> is a 4-byte record <a href="../kinds/">kind</a> indicating the kind of record
that the root record is. Threads are application-independent and may
reference records of any type. This information is provided to prevent
lookup of records of kinds that software is not able to or does not wish
to handle.</p>
<p><code>HASH</code> is a 32-byte hash <a href="../reference/">reference</a> to some other record
indicating which other record this record replies to.</p>
<p>If a record includes this tag, it must also include a
<a href="#reply-by-hash">Reply by Hash</a> or <a href="#reply-by-addr">Reply by Addr</a> tag
as well.</p>
<h2 id="root-by-addr">Root by Addr</h2>
<blockquote>
<p><strong>0x5</strong></p>
</blockquote>
<pre><code class="language-text">      0       2   3   4               8
 0x0  +-------------------------------+ 0
      |  0x5  |0x38| 0|     KIND      |
 0x8  +-------------------------------+ 8
      | ADDR 1/4                      |
 0x10 +-------------------------------+ 16
      | ADDR 2/4                      |
 0x18 +-------------------------------+ 24
      | ADDR 3/4                      |
 0x20 +-------------------------------+ 32
      | ADDR 4/4                      |
 0x28 +-------------------------------+ 40
      | ADDR 5/4                      |
 0x30 +-------------------------------+ 48
      | ADDR 6/4                      |
 0x38 +-------------------------------+ 56
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x5 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x38</li>
<li><code>[3:4]</code> - Zeroed</li>
<li><code>[4:8]</code> - The <a href="../kinds/">kind</a></li>
<li><code>[8:56]</code> - The address (48 bytes)</li>
</ul>
<p>This indicates the root of the reply thread. This is to support loading
an entire thread in one round trip.</p>
<p><code>KIND</code> is a 4-byte record <a href="../kinds/">kind</a> indicating the kind of record
that the root record is. Threads are application-independent and may
reference records of any type. This information is provided to prevent
lookup of records of kinds that software is not able to or does not wish
to handle.</p>
<p><code>ADDR</code> is a 48-byte address <a href="../reference/">reference</a> to some other
record which is the root of the thread.</p>
<p>If a record includes this tag, it must also include a
<a href="#reply-by-hash">Reply by Hash</a> or <a href="#reply-by-addr">Reply by Addr</a> tag
as well.</p>
<h2 id="quote-by-hash">Quote by Hash</h2>
<blockquote>
<p><strong>0x6</strong></p>
</blockquote>
<pre><code class="language-text">      0       2   3   4               8
 0x0  +-------------------------------+ 0
      |  0x6  |0x28| 0|     KIND      |
 0x8  +-------------------------------+ 8
      | HASH 1/4                      |
 0x10 +-------------------------------+ 16
      | HASH 2/4                      |
 0x18 +-------------------------------+ 24
      | HASH 3/4                      |
 0x20 +-------------------------------+ 32
      | HASH 4/4                      |
 0x28 +-------------------------------+ 40
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x6 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x28</li>
<li><code>[3:4]</code> - Zeroed</li>
<li><code>[4:8]</code> - The <a href="../kinds/">kind</a></li>
<li><code>[8:40]</code> - The hash (32 bytes)</li>
</ul>
<p>This is a quote of another record.</p>
<p><code>KIND</code> is a 4-byte record <a href="../kinds/">kind</a> indicating the kind of record
that this one quotes. Quotes are application-independent and may
reference records of any type. This information is provided to prevent
lookup of records of kinds that software is not able to or does not wish
to handle.</p>
<p><code>HASH</code> is a 32-byte hash <a href="../reference/">reference</a> to some other record
indicating which other record this record quotes.</p>
<p>Records with this tag can also have reply and root tags, but not to the
same record that is quoted.</p>
<h2 id="quote-by-addr">Quote by Addr</h2>
<blockquote>
<p><strong>0x7</strong></p>
</blockquote>
<pre><code class="language-text">      0       2   3   4               8
 0x0  +-------------------------------+ 0
      |  0x7  |0x38| 0|     KIND      |
 0x8  +-------------------------------+ 8
      | ADDR 1/4                      |
 0x10 +-------------------------------+ 16
      | ADDR 2/4                      |
 0x18 +-------------------------------+ 24
      | ADDR 3/4                      |
 0x20 +-------------------------------+ 32
      | ADDR 4/4                      |
 0x28 +-------------------------------+ 40
      | ADDR 5/4                      |
 0x30 +-------------------------------+ 48
      | ADDR 6/4                      |
 0x38 +-------------------------------+ 56
</code></pre>
<ul>
<li><code>[0:2]</code> - The type 0x7 as a little-endian encoded unsigned integer</li>
<li><code>[2:3]</code> - The length 0x38</li>
<li><code>[3:4]</code> - Zeroed</li>
<li><code>[4:8]</code> - The <a href="../kinds/">kind</a></li>
<li><code>[8:56]</code> - The address (48 bytes)</li>
</ul>
<p>This is a quote of another record.</p>
<p><code>KIND</code> is a 4-byte record <a href="../kinds/">kind</a> indicating the kind of record
that this one quotes. Quotes are application-independent and may
reference records of any type. This information is provided to prevent
lookup of records of kinds that software is not able to or does not wish
to handle.</p>
<p><code>ADDR</code> is a 48-byte address <a href="../reference/">reference</a> to some other
record indicating which other record this record quotes.</p>
<p>Records with this tag can also have reply and root tags, but not to the
same record that is quoted.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../record/" class="btn btn-neutral float-left" title="Record Format"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../reference/" class="btn btn-neutral float-right" title="References">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div>
    <i>Steve Farroll edition</i>
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../record/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../reference/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
