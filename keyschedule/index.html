<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Key Schedule Record - Mosaic</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Key Schedule Record";
        var mkdocs_page_input_path = "keyschedule.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../img/favicon-96x96.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Mosaic Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../status/">Status and Development</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Mosaic Core</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" >Identity</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../cryptography/">Cryptography</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../identity/">Identity</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../bootstrap/">Bootstrap</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Record Type</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../timestamps/">Timestamps</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../record/">Record Format</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../human_readable_content/">Human Readable Content</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../core_tags/">Core Tags</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reference/">References</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Core Records</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Key Schedule Record</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../profile/">Profile Record</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Protocol</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../filter/">Filter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../protocol/">Core Protocol</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Registries</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../tag_types/">Tag Type Registry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../kinds/">Record Kind Registry</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mosaic Accessory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../human_encodings/">Human Encodings</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mosaic Transport</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../websockets/">WebSockets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../webtransport/">WebTransport</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Extensions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../sync_protocol_extension/">Sync Protocol Extension</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Applications</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Mosaic Social media</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../microblog/">Microblogging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../blog/">Blog</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reply_comment/">Reply Comment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../chat/">Chat</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Mosaic</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Mosaic Core</li>
          <li class="breadcrumb-item">Core Records</li>
      <li class="breadcrumb-item active">Key Schedule Record</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="key-schedule-record">Key Schedule Record</h1>
<p><status>PAGE STATUS: early draft</status></p>
<p>A key schedule record lists subkey information and revocation information for a
master key.</p>
<p>A key schedule record has kind 0x1.</p>
<p>A key schedule record MUST be considered invalid if it does not conform to this
specification.</p>
<p>A key schedule record MUST be considered invalid if the signing key and the
master key are not identical.</p>
<h2 id="tags">Tags</h2>
<p>Every subkey listed in a key schedule record must have an associated <code>Subkey</code>
tag listing the subkey.</p>
<h2 id="payload">Payload</h2>
<p>`The payload contains a sequence of 40-byte subkey records laid out as follows:</p>
<pre><code>            1   2   3   4   4   5   6
    0   8   6   4   2   0   8   6   4
 0  +-------------------------------+
    | SUBKEY    1/4                 |
 8  +-------------------------------+
    | SUBKEY    2/4                 |
 16 +-------------------------------+
    | SUBKEY    3/4                 |
 24 +-------------------------------+
    | SUBKEY    4/4                 |
 32 +-------------------------------+
    |MARKER|RES|REVOC TIMESTAMP     |
    +-------------------------------+
</code></pre>
<p><code>[0:32]</code> - SUBKEY is the 32-byte subkey</p>
<p><code>[32:33]</code> - MARKER is 1-byte and is one of the following</p>
<ul>
<li>0x0 - ACTIVE_SIGNING_KEY - A Mosaic ed25519 signing key (subkey) in current use</li>
<li>0x1 - ACTIVE_ENCRYPTION_KEY - A Mosaic X25519 encryption key in current use<ul>
<li>These keys are used for receiving encrypted data only, not for signing.</li>
<li>Generally the secretkey for encryption is distributed to every device
  that needs the ability to view encrypted data. Being a separate subkey
  from the signing keys, it limits the damage from compromise.</li>
</ul>
</li>
<li>0x40 - REVOKED_ALL - All records signed by the key are to be considered
  invalid.</li>
<li>0x41 - REVOKED_PAST - Records signed by the key that were received prior to
  the revocation timestamp (based on when it was received by software and NOT
  based on the date inside of the record) are still considered valid; however,
  records either received after the revocation timestamp, or with a timestamp
  after the revocation timestamp, are considered invalid.</li>
<li>0x4F - OUT_OF_USE - Key is no longer in use (but nothing is revoked). This
  may be used for signing keys or encryption keys.</li>
<li>0x80 - ACTIVE_NOSTR_KEY - A nostr secp256k1 subkey<ul>
<li>This helps support dual-stack software that works with both nostr and
  Mosaic.</li>
</ul>
</li>
</ul>
<p><code>[33:34]</code> - RES is 1-byte and is reserved. It MUST be 0.</p>
<p><code>[34:40]</code> - REVOC TIMESTAMP is 6-bytes and is in the format described in
<a href="../timestamps/">timestamps</a>. Timestamp is required for REVOKED ALL and
REVOKED PAST.  Timestamp is suggested for OUT_OF_USE. Timestamp SHOULD be
zeroed in all other cases.</p>
<h2 id="server-used">Server Used</h2>
<p>These are posted to all of the author's Outbox servers.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../reference/" class="btn btn-neutral float-left" title="References"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../profile/" class="btn btn-neutral float-right" title="Profile Record">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div>
    <i>Mike Dilger edition</i>
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../reference/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../profile/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
